{"version":3,"sources":["webpack:///static/js/app.6aa7998618cb06e46b2c.js","webpack:///./src/App.vue?fc6a","webpack:///./src/components/VueAvatar.vue?492e","webpack:///./src/components/VueAvatarScale.vue","webpack:///./src/main.js","webpack:///App.vue","webpack:///VueAvatar.vue","webpack:///VueAvatarScale.vue","webpack:///./src/components/VueAvatar.vue?cf8e","webpack:///./src/App.vue?65c7","webpack:///./src/components/VueAvatarScale.vue?adba"],"names":["webpackJsonp","module","exports","__webpack_require__","injectStyle","ssrContext","Component","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","n","__WEBPACK_IMPORTED_MODULE_2__components_VueAvatar__","__WEBPACK_IMPORTED_MODULE_2__components_VueAvatar___default","__WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale__","__WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale___default","d","a","config","productionTip","component","el","render","h","name","data","rotation","scale","methods","saveClicked","img","this","$refs","vueavatar","getImageScaled","image","src","toDataURL","onImageReady","console","log","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","length","err","Array","isArray","TypeError","drawRoundedRect","context","x","y","width","height","borderRadius","rect","widthMinusRad","heightMinusRad","translate","arc","Math","PI","lineTo","props","type","String","default","border","Number","color","cursor","canvas","dragged","imageLoaded","changed","state","drag","my","mx","xxx","resource","computed","canvasWidth","getDimensions","canvasHeight","rotationRadian","mounted","self","avatarEditorCanvas","getContext","paint","loadImage","placeHolder","svgToImage","onload","drawImage","rawSVG","svg","Blob","domURL","URL","webkitURL","url","createObjectURL","Image","setState","state1","min","ceil","max","floor","cnt","random","save","fillStyle","slice","join","dimensions","borderSize","beginPath","fill","restore","onDrop","e","_this","window","event","stopPropagation","preventDefault","dataTransfer","files","reader","FileReader","file","target","result","readAsDataURL","onDragStart","_this2","eventSubject","document","hasMoved","handleMouseUp","onDragEnd","targetTouches","click","removeEventListener","handleMouseMove","onMouseMove","addEventListener","imageState","lastX","lastY","mousePositionX","pageX","clientX","mousePositionY","pageY","clientY","newState","xDiff","yDiff","getBoundedY","getBoundedX","replaceImageInBounds","imageURL","imageObj","getInitialSize","$emit","onerror","isDataURL","crossOrigin","newHeight","newWidth","str","match","abs","cos","sin","widthDiff","heightDiff","paintImage","position","calculatePosition","globalCompositeOperation","rotate","transformDataWithRotation","radian","_transformDataWithRot","_transformDataWithRot2","redraw","clearRect","getImage","cropRect","getCroppingRect","createElement","_getDimensions","imageChanged","dim","frameRect","imageRect","clicked","input","fileSelected","_this3","watch","handler","val","oldval","deep","step","sendValue","$event","parseFloat","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","id","on","dragover","drop","mousedown","touchstart","_v","staticStyle","display","change","staticRenderFns","vue-avatar-editor:image-ready","update:value","style","domProps"],"mappings":"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","file":"static/js/app.6aa7998618cb06e46b2c.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(10)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(6),\n  /* template */\n  __webpack_require__(12),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(9)\n}\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(7),\n  /* template */\n  __webpack_require__(11),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(8),\n  /* template */\n  __webpack_require__(13),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 4 */,\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_VueAvatar__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_VueAvatar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_VueAvatar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale__);\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"VueAvatar\", function() { return __WEBPACK_IMPORTED_MODULE_2__components_VueAvatar___default.a; });\n/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, \"VueAvatarScale\", function() { return __WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale___default.a; });\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('vue-avatar', __WEBPACK_IMPORTED_MODULE_2__components_VueAvatar___default.a);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('vue-avatar-scale', __WEBPACK_IMPORTED_MODULE_3__components_VueAvatarScale___default.a);\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n    el: '#app',\n    render: function render(h) {\n        return h(__WEBPACK_IMPORTED_MODULE_1__App___default.a);\n    }\n});\n\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'app',\n    data: function data() {\n        return {\n            rotation: 0,\n            scale: 1\n        };\n    },\n\n    methods: {\n        saveClicked: function saveClicked() {\n            var img = this.$refs.vueavatar.getImageScaled();\n            this.$refs.image.src = img.toDataURL();\n        },\n        onImageReady: function onImageReady() {\n            console.log('here');\n            this.scale = 1;\n            this.rotation = 0;\n        }\n    }\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar drawRoundedRect = function drawRoundedRect(context, x, y, width, height, borderRadius) {\n    if (borderRadius === 0) {\n        context.rect(x, y, width, height);\n    } else {\n        var widthMinusRad = width - borderRadius;\n        var heightMinusRad = height - borderRadius;\n        context.translate(x, y);\n        context.arc(borderRadius, borderRadius, borderRadius, Math.PI, Math.PI * 1.5);\n        context.lineTo(widthMinusRad, 0);\n        context.arc(widthMinusRad, borderRadius, borderRadius, Math.PI * 1.5, Math.PI * 2);\n        context.lineTo(width, heightMinusRad);\n        context.arc(widthMinusRad, heightMinusRad, borderRadius, Math.PI * 2, Math.PI * 0.5);\n        context.lineTo(borderRadius, height);\n        context.arc(borderRadius, heightMinusRad, borderRadius, Math.PI * 0.5, Math.PI);\n        context.translate(-x, -y);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        image: {\n            type: String,\n            default: ''\n        },\n        border: {\n            type: Number,\n            default: 25\n        },\n        borderRadius: {\n            type: Number,\n            default: 0\n        },\n        width: {\n            type: Number,\n            default: 200\n        },\n        height: {\n            type: Number,\n            default: 200\n        },\n        color: {\n            type: Array,\n            default: function _default() {\n                return [0, 0, 0, 0.5];\n            }\n        },\n        scale: {\n            type: Number,\n            default: 1\n        },\n        rotation: {\n            type: Number,\n            default: 0\n        }\n    },\n    data: function data() {\n        return {\n            cursor: 'cursorPointer',\n            canvas: null,\n            context: null,\n            dragged: false,\n            imageLoaded: false,\n            changed: false,\n            state: {\n                drag: false,\n                my: null,\n                mx: null,\n                xxx: 'ab',\n                image: {\n                    x: 0,\n                    y: 0,\n                    resource: null\n                }\n            }\n        };\n    },\n\n    computed: {\n        canvasWidth: function canvasWidth() {\n            return this.getDimensions().canvas.width;\n        },\n        canvasHeight: function canvasHeight() {\n            return this.getDimensions().canvas.height;\n        },\n        rotationRadian: function rotationRadian() {\n            return this.rotation * Math.PI / 180;\n        }\n    },\n    mounted: function mounted() {\n        var self = this;\n        this.canvas = this.$refs.avatarEditorCanvas;\n        this.context = this.canvas.getContext('2d');\n        this.paint();\n\n        if (!this.image) {\n            var placeHolder = this.svgToImage('<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 65 65\"><defs><style>.cls-1{fill:#000;}</style></defs><title>Upload_Upload</title><path class=\"cls-1\" d=\"M32.5,1A31.5,31.5,0,1,1,1,32.5,31.54,31.54,0,0,1,32.5,1m0-1A32.5,32.5,0,1,0,65,32.5,32.5,32.5,0,0,0,32.5,0h0Z\"/><polygon class=\"cls-1\" points=\"41.91 28.2 32.59 18.65 23.09 28.39 24.17 29.44 31.87 21.54 31.87 40.05 33.37 40.05 33.37 21.59 40.83 29.25 41.91 28.2\"/><polygon class=\"cls-1\" points=\"40.66 40.35 40.66 44.35 24.34 44.35 24.34 40.35 22.34 40.35 22.34 44.35 22.34 46.35 24.34 46.35 40.66 46.35 42.66 46.35 42.66 44.35 42.66 40.35 40.66 40.35\"/></svg>');\n\n            placeHolder.onload = function () {\n                var x = self.canvasWidth / 2 - this.width / 2;\n                var y = self.canvasHeight / 2 - this.height / 2;\n                self.context.drawImage(placeHolder, x, y, this.width, this.height);\n            };\n        } else {\n            this.loadImage(this.image);\n        }\n    },\n\n    methods: {\n        svgToImage: function svgToImage(rawSVG) {\n            var svg = new Blob([rawSVG], { type: 'image/svg+xml;charset=utf-8' });\n            var domURL = self.URL || self.webkitURL || self;\n            var url = domURL.createObjectURL(svg);\n            var img = new Image();\n            img.src = url;\n            return img;\n        },\n        setState: function setState(state1) {\n            var min = Math.ceil(1);\n            var max = Math.floor(10000);\n\n            this.state = state1;\n            this.state.cnt = 'HELLO' + Math.floor(Math.random() * (max - min)) + min;\n        },\n        paint: function paint() {\n            this.context.save();\n            this.context.translate(0, 0);\n            this.context.fillStyle = 'rgba(' + this.color.slice(0, 4).join(',') + ')';\n\n            var borderRadius = this.borderRadius;\n            var dimensions = this.getDimensions();\n            var borderSize = dimensions.border;\n            var height = dimensions.canvas.height;\n            var width = dimensions.canvas.width;\n\n            // clamp border radius between zero (perfect rectangle) and half the size without borders (perfect circle or \"pill\")\n            borderRadius = Math.max(borderRadius, 0);\n            borderRadius = Math.min(borderRadius, width / 2 - borderSize, height / 2 - borderSize);\n\n            this.context.beginPath();\n\n            // inner rect, possibly rounded\n            drawRoundedRect(this.context, borderSize, borderSize, width - borderSize * 2, height - borderSize * 2, borderRadius);\n\n            this.context.rect(width, 0, -width, height); // outer rect, drawn \"counterclockwise\"\n            this.context.fill('evenodd');\n            this.context.restore();\n        },\n        getDimensions: function getDimensions() {\n            return {\n                width: this.width,\n                height: this.height,\n                border: this.border,\n                canvas: {\n                    width: this.width + this.border * 2,\n                    height: this.height + this.border * 2\n                }\n            };\n        },\n        onDrop: function onDrop(e) {\n            var _this = this;\n\n            e = e || window.event;\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (e.dataTransfer && e.dataTransfer.files.length) {\n                // this.props.onDropFile(e)\n                var reader = new FileReader();\n                var file = e.dataTransfer.files[0];\n                this.changed = true;\n                reader.onload = function (e) {\n                    return _this.loadImage(e.target.result);\n                };\n                reader.readAsDataURL(file);\n            }\n        },\n        onDragStart: function onDragStart(e) {\n            var _this2 = this;\n\n            e = e || window.event;\n            e.preventDefault();\n            this.state.drag = true;\n            this.state.mx = null;\n            this.state.my = null;\n            this.cursor = 'cursorGrabbing';\n            var eventSubject = document;\n            var hasMoved = false;\n            var handleMouseUp = function handleMouseUp(event) {\n                _this2.onDragEnd(event);\n                if (!hasMoved && event.targetTouches) {\n                    e.target.click();\n                }\n                eventSubject.removeEventListener('mouseup', handleMouseUp);\n                eventSubject.removeEventListener('mousemove', handleMouseMove);\n                eventSubject.removeEventListener('touchend', handleMouseUp);\n                eventSubject.removeEventListener('touchmove', handleMouseMove);\n            };\n            var handleMouseMove = function handleMouseMove(event) {\n                hasMoved = true;\n                _this2.onMouseMove(event);\n            };\n            eventSubject.addEventListener('mouseup', handleMouseUp);\n            eventSubject.addEventListener('mousemove', handleMouseMove);\n            eventSubject.addEventListener('touchend', handleMouseUp);\n            eventSubject.addEventListener('touchmove', handleMouseMove);\n        },\n        onDragEnd: function onDragEnd(e) {\n            if (this.state.drag) {\n                this.state.drag = false;\n                this.cursor = 'cursorPointer';\n            }\n        },\n        onMouseMove: function onMouseMove(e) {\n            e = e || window.event;\n            if (this.state.drag === false) {\n                return;\n            }\n\n            this.dragged = true;\n            this.changed = true;\n\n            var imageState = this.state.image;\n            var lastX = imageState.x;\n            var lastY = imageState.y;\n\n            var mousePositionX = e.targetTouches ? e.targetTouches[0].pageX : e.clientX;\n            var mousePositionY = e.targetTouches ? e.targetTouches[0].pageY : e.clientY;\n\n            var newState = {\n                mx: mousePositionX,\n                my: mousePositionY,\n                image: imageState\n            };\n\n            if (this.state.mx && this.state.my) {\n                var xDiff = (this.state.mx - mousePositionX) / this.scale;\n                var yDiff = (this.state.my - mousePositionY) / this.scale;\n\n                imageState.y = this.getBoundedY(lastY - yDiff, this.scale);\n                imageState.x = this.getBoundedX(lastX - xDiff, this.scale);\n            }\n\n            this.state.mx = newState.mx;\n            this.state.my = newState.my;\n            this.state.image = imageState;\n            // this.setState(newState)\n        },\n        replaceImageInBounds: function replaceImageInBounds() {\n            var imageState = this.state.image;\n            imageState.y = this.getBoundedY(imageState.y, this.scale);\n            imageState.x = this.getBoundedX(imageState.x, this.scale);\n        },\n        loadImage: function loadImage(imageURL) {\n            var imageObj = new Image();\n            var self = this;\n\n            // imageObj.onload = () => this.handleImageReady(imageObj);\n            imageObj.onload = function () {\n                var imageState = self.getInitialSize(imageObj.width, imageObj.height);\n                self.state.image.x = 0;\n                self.state.image.y = 0;\n                self.state.image.resource = imageObj;\n                self.state.image.width = imageState.width;\n                self.state.image.height = imageState.height;\n                self.state.drag = false;\n                self.$emit('vue-avatar-editor:image-ready', self.scale);\n                self.imageLoaded = true;\n                self.cursor = 'cursorGrab';\n            };\n            imageObj.onerror = function (err) {\n                return console.log('error loading image: ', err);\n            };\n\n            // imageObj.onerror = this.props.onLoadFailure\n            if (!this.isDataURL(imageURL)) {\n                imageObj.crossOrigin = 'anonymous';\n            }\n\n            imageObj.src = imageURL;\n        },\n        getInitialSize: function getInitialSize(width, height) {\n            var newHeight = void 0;\n            var newWidth = void 0;\n\n            var dimensions = this.getDimensions();\n            var canvasRatio = dimensions.height / dimensions.width;\n            var imageRatio = height / width;\n\n            if (canvasRatio > imageRatio) {\n                newHeight = this.getDimensions().height;\n                newWidth = width * (newHeight / height);\n            } else {\n                newWidth = this.getDimensions().width;\n                newHeight = height * (newWidth / width);\n            }\n\n            return {\n                height: newHeight,\n                width: newWidth\n            };\n        },\n        isDataURL: function isDataURL(str) {\n            if (str === null) {\n                return false;\n            }\n            return !!str.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+=[a-z\\-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*\\s*$/i); // eslint-disable-line no-useless-escape\n        },\n        getBoundedX: function getBoundedX(x, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            var width = Math.abs(image.width * Math.cos(this.rotationRadian)) + Math.abs(image.height * Math.sin(this.rotationRadian));\n            var widthDiff = Math.floor((width - dimensions.width / scale) / 2);\n            widthDiff = Math.max(0, widthDiff);\n            return Math.max(-widthDiff, Math.min(x, widthDiff));\n        },\n        getBoundedY: function getBoundedY(y, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            var height = Math.abs(image.width * Math.sin(this.rotationRadian)) + Math.abs(image.height * Math.cos(this.rotationRadian));\n            var heightDiff = Math.floor((height - dimensions.height / scale) / 2);\n            heightDiff = Math.max(0, heightDiff);\n            return Math.max(-heightDiff, Math.min(y, heightDiff));\n        },\n        paintImage: function paintImage(context, image, border) {\n            if (image.resource) {\n                var position = this.calculatePosition(image, border);\n                context.save();\n                context.globalCompositeOperation = 'destination-over';\n                var dimensions = this.getDimensions();\n                context.translate(dimensions.canvas.width / 2, dimensions.canvas.height / 2);\n                context.rotate(this.rotationRadian);\n                context.translate(-dimensions.canvas.width / 2, -dimensions.canvas.height / 2);\n                context.drawImage(image.resource, position.x, position.y, position.width, position.height);\n                context.restore();\n            }\n        },\n        transformDataWithRotation: function transformDataWithRotation(x, y) {\n            var radian = -this.rotationRadian;\n            var rx = x * Math.cos(radian) - y * Math.sin(radian);\n            var ry = x * Math.sin(radian) + y * Math.cos(radian);\n            return [rx, ry];\n        },\n        calculatePosition: function calculatePosition(image, border) {\n            image = image || this.state.image;\n            var dimensions = this.getDimensions();\n            var width = image.width * this.scale;\n            var height = image.height * this.scale;\n            var widthDiff = (width - dimensions.width) / 2;\n            var heightDiff = (height - dimensions.height) / 2;\n            var x = image.x * this.scale; // - widthDiff;\n            var y = image.y * this.scale; // - heightDiff;\n\n            var _transformDataWithRot = this.transformDataWithRotation(x, y);\n\n            var _transformDataWithRot2 = _slicedToArray(_transformDataWithRot, 2);\n\n            x = _transformDataWithRot2[0];\n            y = _transformDataWithRot2[1];\n\n            x += border - widthDiff;\n            y += border - heightDiff;\n            return {\n                x: x,\n                y: y,\n                height: height,\n                width: width\n            };\n        },\n        redraw: function redraw() {\n            this.context.clearRect(0, 0, this.getDimensions().canvas.width, this.getDimensions().canvas.height);\n            this.paint();\n            this.paintImage(this.context, this.state.image, this.border);\n        },\n        getImage: function getImage() {\n            var cropRect = this.getCroppingRect();\n            var image = this.state.image;\n\n            // get actual pixel coordinates\n            cropRect.x *= image.resource.width;\n            cropRect.y *= image.resource.height;\n            cropRect.width *= image.resource.width;\n            cropRect.height *= image.resource.height;\n\n            // create a canvas with the correct dimensions\n            var canvas = document.createElement('canvas');\n            canvas.width = cropRect.width;\n            canvas.height = cropRect.height;\n\n            // draw the full-size image at the correct position,\n            // the image gets truncated to the size of the canvas.\n            canvas.getContext('2d').drawImage(image.resource, -cropRect.x, -cropRect.y);\n\n            return canvas;\n        },\n        getImageScaled: function getImageScaled() {\n            var _getDimensions = this.getDimensions(),\n                width = _getDimensions.width,\n                height = _getDimensions.height;\n\n            var canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n\n            // don't paint a border here, as it is the resulting image\n            this.paintImage(canvas.getContext('2d'), this.state.image, 0);\n\n            return canvas;\n        },\n        imageChanged: function imageChanged() {\n            return this.changed;\n        },\n        getCroppingRect: function getCroppingRect() {\n            var dim = this.getDimensions();\n            var frameRect = {\n                x: dim.border,\n                y: dim.border,\n                width: dim.width,\n                height: dim.height\n            };\n            var imageRect = this.calculatePosition(this.state.image, dim.border);\n\n            return {\n                x: (frameRect.x - imageRect.x) / imageRect.width,\n                y: (frameRect.y - imageRect.y) / imageRect.height,\n                width: frameRect.width / imageRect.width,\n                height: frameRect.height / imageRect.height\n            };\n        },\n        clicked: function clicked(e) {\n            if (this.dragged === true) {\n                this.dragged = false;\n            } else {\n                this.$refs.input.click();\n            }\n        },\n        fileSelected: function fileSelected(e) {\n            var _this3 = this;\n\n            var files = e.target.files || e.dataTransfer.files;\n\n            if (!files.length) {\n                return;\n            }\n\n            // var image = new Image();\n            var reader = new FileReader();\n\n            this.changed = true;\n            reader.onload = function (e) {\n                return _this3.loadImage(e.target.result);\n            };\n            reader.readAsDataURL(files[0]);\n        }\n    },\n    watch: {\n        state: {\n            handler: function handler(val, oldval) {\n                if (this.imageLoaded) {\n                    this.redraw();\n                }\n            },\n\n            deep: true\n        },\n        scale: function scale() {\n            if (this.imageLoaded) {\n                this.replaceImageInBounds();\n                this.redraw();\n            }\n        },\n        rotation: function rotation() {\n            if (this.imageLoaded) {\n                this.replaceImageInBounds();\n                this.redraw();\n            }\n        }\n    }\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    props: {\n        width: {\n            type: Number,\n            default: 200\n        },\n        min: {\n            type: Number,\n            default: 1\n        },\n        max: {\n            type: Number,\n            default: 2\n        },\n        step: {\n            type: Number,\n            default: 0.01\n        },\n        value: {\n            type: Number,\n            default: 0\n        }\n    },\n    methods: {\n        sendValue: function sendValue($event) {\n            this.$emit('update:value', parseFloat($event.target.value));\n        }\n    }\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('canvas', {\n    ref: \"avatarEditorCanvas\",\n    staticClass: \"cursorPointer\",\n    attrs: {\n      \"width\": _vm.canvasWidth,\n      \"height\": _vm.canvasHeight,\n      \"id\": \"avatarEditorCanvas\"\n    },\n    on: {\n      \"dragover\": function($event) {\n        $event.preventDefault();\n      },\n      \"drop\": _vm.onDrop,\n      \"mousedown\": _vm.onDragStart,\n      \"touchstart\": _vm.onDragStart,\n      \"click\": _vm.clicked\n    }\n  }), _vm._v(\" \"), _c('input', {\n    ref: \"input\",\n    staticStyle: {\n      \"display\": \"none\"\n    },\n    attrs: {\n      \"type\": \"file\"\n    },\n    on: {\n      \"change\": _vm.fileSelected\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('h1', [_vm._v(\"hello\")]), _vm._v(\" \"), _c('vue-avatar', {\n    ref: \"vueavatar\",\n    attrs: {\n      \"width\": 400,\n      \"height\": 400,\n      \"rotation\": _vm.rotation,\n      \"scale\": _vm.scale\n    },\n    on: {\n      \"vue-avatar-editor:image-ready\": _vm.onImageReady\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('vue-avatar-scale', {\n    ref: \"vueavatarscale\",\n    attrs: {\n      \"width\": 250,\n      \"min\": 1,\n      \"max\": 3,\n      \"step\": 0.02,\n      \"value\": _vm.scale\n    },\n    on: {\n      \"update:value\": function($event) {\n        _vm.scale = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('vue-avatar-scale', {\n    ref: \"vueavatarrotate\",\n    attrs: {\n      \"width\": 250,\n      \"min\": 0,\n      \"max\": 360,\n      \"step\": 1,\n      \"value\": _vm.rotation\n    },\n    on: {\n      \"update:value\": function($event) {\n        _vm.rotation = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('img', {\n    ref: \"image\",\n    attrs: {\n      \"src\": \"\"\n    }\n  }), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.saveClicked\n    }\n  }, [_vm._v(\"Click\")])], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('input', {\n    style: ({\n      width: _vm.width + 'px'\n    }),\n    attrs: {\n      \"type\": \"range\",\n      \"min\": _vm.min,\n      \"max\": _vm.max,\n      \"step\": _vm.step\n    },\n    domProps: {\n      \"value\": _vm.value\n    },\n    on: {\n      \"input\": _vm.sendValue\n    }\n  })\n},staticRenderFns: []}\n\n/***/ })\n],[5]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.6aa7998618cb06e46b2c.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6680e483\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6680e483\\\",\\\"hasScoped\\\":false}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 1\n// module chunks = 0","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-47dd3714\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./VueAvatar.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./VueAvatar.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-47dd3714\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./VueAvatar.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/VueAvatar.vue\n// module id = 2\n// module chunks = 0","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./VueAvatarScale.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8291e074\\\",\\\"hasScoped\\\":false}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./VueAvatarScale.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/VueAvatarScale.vue\n// module id = 3\n// module chunks = 0","import Vue from 'vue';\nimport App from './App';\nimport VueAvatar from './components/VueAvatar';\nimport VueAvatarScale from './components/VueAvatarScale';\n\nVue.config.productionTip = false;\n\nVue.component('vue-avatar', VueAvatar);\nVue.component('vue-avatar-scale', VueAvatarScale);\n\n/* eslint-disable no-new */\nnew Vue({\n    el: '#app',\n    render: h => h(App)\n});\n\nexport { VueAvatar, VueAvatarScale };\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"app\">\n    <h1>hello</h1>\n    <vue-avatar\n      :width=400\n      :height=400\n      :rotation=\"rotation\"\n      :scale=\"scale\"\n      ref=\"vueavatar\"\n      @vue-avatar-editor:image-ready=\"onImageReady\"\n      >\n    </vue-avatar>\n    <br>\n    <vue-avatar-scale\n      ref=\"vueavatarscale\"\n      :width=250\n      :min=1\n      :max=3\n      :step=0.02\n      :value.sync='scale'\n      >\n    </vue-avatar-scale>\n    <vue-avatar-scale\n      ref=\"vueavatarrotate\"\n      :width=250\n      :min=0\n      :max=360\n      :step=1\n      :value.sync='rotation'\n      >\n    </vue-avatar-scale>\n    <br>\n    <img src=\"\" ref=\"image\">\n    <button v-on:click=\"saveClicked\">Click</button>\n  </div>\n</template>\n\n<script>\n    export default {\n        name: 'app',\n        data () {\n            return {\n                rotation: 0,\n                scale: 1\n            };\n        },\n        methods: {\n            saveClicked () {\n                var img = this.$refs.vueavatar.getImageScaled();\n                this.$refs.image.src = img.toDataURL();\n            },\n            onImageReady () {\n                console.log('here');\n                this.scale = 1;\n                this.rotation = 0;\n            }\n        }\n    };\n  </script>\n\n<style>\n#app {\n      font-family: 'Avenir', Helvetica, Arial, sans-serif;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      text-align: center;\n      color: #2c3e50;\n      margin-top: 60px;\n  }\n  </style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?6cf60c12","<template>\n  <div>\n    <canvas\n      :width=\"canvasWidth\"\n      :height=\"canvasHeight\"\n      class=\"cursorPointer\"\n      id=\"avatarEditorCanvas\"\n      ref=\"avatarEditorCanvas\"\n      @dragover.prevent\n      @drop=\"onDrop\"\n      @mousedown=\"onDragStart\"\n      @touchstart=\"onDragStart\"\n      @click=\"clicked\">\n    </canvas>\n    <input\n      type=\"file\"\n      ref=\"input\"\n      @change=\"fileSelected\"\n      style=\"display:none;\"\n      />\n  </div>\n</template>\n\n<style type=\"text/css\">\ncanvas {\n    width: 300px;\n    height: 300px;\n}\n\n.cursorPointer{\n    cursor: pointer;\n}\n\n.cursorGrab{\n    cursor: grab;\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n}\n\n.cursorGrabbing{\n    cursor: grabbing;\n    cursor: -webkit-grabbing;\n    cursor: -moz-grabbing;\n}\n</style>\n\n<script>\nconst drawRoundedRect = (context, x, y, width, height, borderRadius) => {\n    if (borderRadius === 0) {\n        context.rect(x, y, width, height);\n    } else {\n        const widthMinusRad = width - borderRadius;\n        const heightMinusRad = height - borderRadius;\n        context.translate(x, y);\n        context.arc(borderRadius, borderRadius, borderRadius, Math.PI, Math.PI * 1.5);\n        context.lineTo(widthMinusRad, 0);\n        context.arc(widthMinusRad, borderRadius, borderRadius, Math.PI * 1.5, Math.PI * 2);\n        context.lineTo(width, heightMinusRad);\n        context.arc(widthMinusRad, heightMinusRad, borderRadius, Math.PI * 2, Math.PI * 0.5);\n        context.lineTo(borderRadius, height);\n        context.arc(borderRadius, heightMinusRad, borderRadius, Math.PI * 0.5, Math.PI);\n        context.translate(-x, -y);\n    }\n};\n\nexport default {\n    props: {\n        image: {\n            type: String,\n            default: ''\n        },\n        border: {\n            type: Number,\n            default: 25\n        },\n        borderRadius: {\n            type: Number,\n            default: 0\n        },\n        width: {\n            type: Number,\n            default: 200\n        },\n        height: {\n            type: Number,\n            default: 200\n        },\n        color: {\n            type: Array,\n            default: () => [0, 0, 0, 0.5]\n        },\n        scale: {\n            type: Number,\n            default: 1\n        },\n        rotation: {\n            type: Number,\n            default: 0\n        }\n    },\n    data () {\n        return {\n            cursor: 'cursorPointer',\n            canvas: null,\n            context: null,\n            dragged: false,\n            imageLoaded: false,\n            changed: false,\n            state: {\n                drag: false,\n                my: null,\n                mx: null,\n                xxx: 'ab',\n                image: {\n                    x: 0,\n                    y: 0,\n                    resource: null\n                }\n            }\n        };\n    },\n    computed: {\n        canvasWidth () {\n            return this.getDimensions().canvas.width;\n        },\n        canvasHeight () {\n            return this.getDimensions().canvas.height;\n        },\n        rotationRadian () {\n            return this.rotation * Math.PI / 180;\n        }\n    },\n    mounted () {\n        let self = this;\n        this.canvas = this.$refs.avatarEditorCanvas;\n        this.context = this.canvas.getContext('2d');\n        this.paint();\n\n        if (!this.image) {\n            var placeHolder = this.svgToImage('<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 65 65\"><defs><style>.cls-1{fill:#000;}</style></defs><title>Upload_Upload</title><path class=\"cls-1\" d=\"M32.5,1A31.5,31.5,0,1,1,1,32.5,31.54,31.54,0,0,1,32.5,1m0-1A32.5,32.5,0,1,0,65,32.5,32.5,32.5,0,0,0,32.5,0h0Z\"/><polygon class=\"cls-1\" points=\"41.91 28.2 32.59 18.65 23.09 28.39 24.17 29.44 31.87 21.54 31.87 40.05 33.37 40.05 33.37 21.59 40.83 29.25 41.91 28.2\"/><polygon class=\"cls-1\" points=\"40.66 40.35 40.66 44.35 24.34 44.35 24.34 40.35 22.34 40.35 22.34 44.35 22.34 46.35 24.34 46.35 40.66 46.35 42.66 46.35 42.66 44.35 42.66 40.35 40.66 40.35\"/></svg>');\n\n            placeHolder.onload = function () {\n                var x = self.canvasWidth / 2 - this.width / 2;\n                var y = self.canvasHeight / 2 - this.height / 2;\n                self.context.drawImage(placeHolder, x, y, this.width, this.height);\n            };\n        } else {\n            this.loadImage(this.image);\n        }\n    },\n    methods: {\n        svgToImage (rawSVG) {\n            let svg = new Blob([rawSVG], {type: 'image/svg+xml;charset=utf-8'});\n            let domURL = self.URL || self.webkitURL || self;\n            let url = domURL.createObjectURL(svg);\n            let img = new Image();\n            img.src = url;\n            return img;\n        },\n        setState (state1) {\n            var min = Math.ceil(1);\n            var max = Math.floor(10000);\n\n            this.state = state1;\n            this.state.cnt = 'HELLO' + Math.floor(Math.random() * (max - min)) + min;\n        },\n        paint () {\n            this.context.save();\n            this.context.translate(0, 0);\n            this.context.fillStyle = 'rgba(' + this.color.slice(0, 4).join(',') + ')';\n\n            let borderRadius = this.borderRadius;\n            const dimensions = this.getDimensions();\n            const borderSize = dimensions.border;\n            const height = dimensions.canvas.height;\n            const width = dimensions.canvas.width;\n\n            // clamp border radius between zero (perfect rectangle) and half the size without borders (perfect circle or \"pill\")\n            borderRadius = Math.max(borderRadius, 0);\n            borderRadius = Math.min(borderRadius, width / 2 - borderSize, height / 2 - borderSize);\n\n            this.context.beginPath();\n\n            // inner rect, possibly rounded\n            drawRoundedRect(\n                this.context,\n                borderSize,\n                borderSize,\n                width - borderSize * 2,\n                height - borderSize * 2,\n                borderRadius);\n\n            this.context.rect(width, 0, -width, height); // outer rect, drawn \"counterclockwise\"\n            this.context.fill('evenodd');\n            this.context.restore();\n        },\n        getDimensions () {\n            return {\n                width: this.width,\n                height: this.height,\n                border: this.border,\n                canvas: {\n                    width: this.width + (this.border * 2),\n                    height: this.height + (this.border * 2)\n                }\n            };\n        },\n        onDrop (e) {\n            e = e || window.event;\n            e.stopPropagation();\n            e.preventDefault();\n\n            if (e.dataTransfer && e.dataTransfer.files.length) {\n                // this.props.onDropFile(e)\n                const reader = new FileReader();\n                const file = e.dataTransfer.files[0];\n                this.changed = true;\n                reader.onload = (e) => this.loadImage(e.target.result);\n                reader.readAsDataURL(file);\n            }\n        },\n        onDragStart (e) {\n            e = e || window.event;\n            e.preventDefault();\n            this.state.drag = true;\n            this.state.mx = null;\n            this.state.my = null;\n            this.cursor = 'cursorGrabbing';\n            let eventSubject = document;\n            let hasMoved = false;\n            let handleMouseUp = (event) => {\n                this.onDragEnd(event);\n                if (!hasMoved && event.targetTouches) {\n                    e.target.click();\n                }\n                eventSubject.removeEventListener('mouseup', handleMouseUp);\n                eventSubject.removeEventListener('mousemove', handleMouseMove);\n                eventSubject.removeEventListener('touchend', handleMouseUp);\n                eventSubject.removeEventListener('touchmove', handleMouseMove);\n            };\n            let handleMouseMove = (event) => {\n                hasMoved = true;\n                this.onMouseMove(event);\n            };\n            eventSubject.addEventListener('mouseup', handleMouseUp);\n            eventSubject.addEventListener('mousemove', handleMouseMove);\n            eventSubject.addEventListener('touchend', handleMouseUp);\n            eventSubject.addEventListener('touchmove', handleMouseMove);\n        },\n        onDragEnd (e) {\n            if (this.state.drag) {\n                this.state.drag = false;\n                this.cursor = 'cursorPointer';\n            }\n        },\n        onMouseMove (e) {\n            e = e || window.event;\n            if (this.state.drag === false) {\n                return;\n            }\n\n            this.dragged = true;\n            this.changed = true;\n\n            let imageState = this.state.image;\n            const lastX = imageState.x;\n            const lastY = imageState.y;\n\n            const mousePositionX = e.targetTouches ? e.targetTouches[0].pageX : e.clientX;\n            const mousePositionY = e.targetTouches ? e.targetTouches[0].pageY : e.clientY;\n\n            const newState = {\n                mx: mousePositionX,\n                my: mousePositionY,\n                image: imageState\n            };\n\n            if (this.state.mx && this.state.my) {\n                const xDiff = (this.state.mx - mousePositionX) / this.scale;\n                const yDiff = (this.state.my - mousePositionY) / this.scale;\n\n                imageState.y = this.getBoundedY(lastY - yDiff, this.scale);\n                imageState.x = this.getBoundedX(lastX - xDiff, this.scale);\n            }\n\n            this.state.mx = newState.mx;\n            this.state.my = newState.my;\n            this.state.image = imageState;\n            // this.setState(newState)\n        },\n        replaceImageInBounds () {\n            let imageState = this.state.image;\n            imageState.y = this.getBoundedY(imageState.y, this.scale);\n            imageState.x = this.getBoundedX(imageState.x, this.scale);\n        },\n        loadImage (imageURL) {\n            let imageObj = new Image();\n            let self = this;\n\n            // imageObj.onload = () => this.handleImageReady(imageObj);\n            imageObj.onload = () => {\n                let imageState = self.getInitialSize(imageObj.width, imageObj.height);\n                self.state.image.x = 0;\n                self.state.image.y = 0;\n                self.state.image.resource = imageObj;\n                self.state.image.width = imageState.width;\n                self.state.image.height = imageState.height;\n                self.state.drag = false;\n                self.$emit('vue-avatar-editor:image-ready', self.scale);\n                self.imageLoaded = true;\n                self.cursor = 'cursorGrab';\n            };\n            imageObj.onerror = (err) => console.log('error loading image: ', err);\n\n            // imageObj.onerror = this.props.onLoadFailure\n            if (!this.isDataURL(imageURL)) {\n                imageObj.crossOrigin = 'anonymous';\n            }\n\n            imageObj.src = imageURL;\n        },\n        getInitialSize (width, height) {\n            let newHeight;\n            let newWidth;\n\n            const dimensions = this.getDimensions();\n            const canvasRatio = dimensions.height / dimensions.width;\n            const imageRatio = height / width;\n\n            if (canvasRatio > imageRatio) {\n                newHeight = (this.getDimensions().height);\n                newWidth = (width * (newHeight / height));\n            } else {\n                newWidth = (this.getDimensions().width);\n                newHeight = (height * (newWidth / width));\n            }\n\n            return {\n                height: newHeight,\n                width: newWidth\n            };\n        },\n        isDataURL (str) {\n            if (str === null) {\n                return false;\n            }\n            return !!str.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z\\-]+=[a-z\\-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*\\s*$/i); // eslint-disable-line no-useless-escape\n        },\n        getBoundedX (x, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            let width = Math.abs(image.width * Math.cos(this.rotationRadian)) + Math.abs(image.height * Math.sin(this.rotationRadian));\n            let widthDiff = Math.floor((width - dimensions.width / scale) / 2);\n            widthDiff = Math.max(0, widthDiff);\n            return Math.max(-widthDiff, Math.min(x, widthDiff));\n        },\n        getBoundedY (y, scale) {\n            var image = this.state.image;\n            var dimensions = this.getDimensions();\n            let height = Math.abs(image.width * Math.sin(this.rotationRadian)) + Math.abs(image.height * Math.cos(this.rotationRadian));\n            let heightDiff = Math.floor((height - dimensions.height / scale) / 2);\n            heightDiff = Math.max(0, heightDiff);\n            return Math.max(-heightDiff, Math.min(y, heightDiff));\n        },\n        paintImage (context, image, border) {\n            if (image.resource) {\n                var position = this.calculatePosition(image, border);\n                context.save();\n                context.globalCompositeOperation = 'destination-over';\n                let dimensions = this.getDimensions();\n                context.translate(dimensions.canvas.width / 2, dimensions.canvas.height / 2);\n                context.rotate(this.rotationRadian);\n                context.translate(-dimensions.canvas.width / 2, -dimensions.canvas.height / 2);\n                context.drawImage(\n                    image.resource,\n                    position.x,\n                    position.y,\n                    position.width,\n                    position.height);\n                context.restore();\n            }\n        },\n        transformDataWithRotation (x, y) {\n            let radian = -this.rotationRadian;\n            let rx = x * Math.cos(radian) - y * Math.sin(radian);\n            let ry = x * Math.sin(radian) + y * Math.cos(radian);\n            return [rx, ry];\n        },\n        calculatePosition (image, border) {\n            image = image || this.state.image;\n            var dimensions = this.getDimensions();\n            let width = image.width * this.scale;\n            let height = image.height * this.scale;\n            var widthDiff = (width - dimensions.width) / 2;\n            var heightDiff = (height - dimensions.height) / 2;\n            var x = image.x * this.scale;// - widthDiff;\n            var y = image.y * this.scale;// - heightDiff;\n            [x, y] = this.transformDataWithRotation(x, y);\n            x += border - widthDiff;\n            y += border - heightDiff;\n            return {\n                x,\n                y,\n                height,\n                width\n            };\n        },\n        redraw () {\n            this.context.clearRect(0, 0, this.getDimensions().canvas.width, this.getDimensions().canvas.height);\n            this.paint();\n            this.paintImage(this.context, this.state.image, this.border);\n        },\n        getImage () {\n            const cropRect = this.getCroppingRect();\n            const image = this.state.image;\n\n            // get actual pixel coordinates\n            cropRect.x *= image.resource.width;\n            cropRect.y *= image.resource.height;\n            cropRect.width *= image.resource.width;\n            cropRect.height *= image.resource.height;\n\n            // create a canvas with the correct dimensions\n            const canvas = document.createElement('canvas');\n            canvas.width = cropRect.width;\n            canvas.height = cropRect.height;\n\n            // draw the full-size image at the correct position,\n            // the image gets truncated to the size of the canvas.\n            canvas.getContext('2d').drawImage(image.resource, -cropRect.x, -cropRect.y);\n\n            return canvas;\n        },\n        getImageScaled () {\n            const { width, height } = this.getDimensions();\n\n            const canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n\n            // don't paint a border here, as it is the resulting image\n            this.paintImage(canvas.getContext('2d'), this.state.image, 0);\n\n            return canvas;\n        },\n        imageChanged () {\n            return this.changed;\n        },\n        getCroppingRect () {\n            const dim = this.getDimensions();\n            const frameRect = {\n                x: dim.border,\n                y: dim.border,\n                width: dim.width,\n                height: dim.height\n            };\n            const imageRect = this.calculatePosition(this.state.image, dim.border);\n\n            return {\n                x: (frameRect.x - imageRect.x) / imageRect.width,\n                y: (frameRect.y - imageRect.y) / imageRect.height,\n                width: frameRect.width / imageRect.width,\n                height: frameRect.height / imageRect.height\n            };\n        },\n        clicked (e) {\n            if (this.dragged === true) {\n                this.dragged = false;\n            } else {\n                this.$refs.input.click();\n            }\n        },\n        fileSelected (e) {\n            var files = e.target.files || e.dataTransfer.files;\n\n            if (!files.length) {\n                return;\n            }\n\n            // var image = new Image();\n            var reader = new FileReader();\n\n            this.changed = true;\n            reader.onload = (e) => this.loadImage(e.target.result);\n            reader.readAsDataURL(files[0]);\n        }\n    },\n    watch: {\n        state: {\n            handler (val, oldval) {\n                if (this.imageLoaded) {\n                    this.redraw();\n                }\n            },\n            deep: true\n        },\n        scale () {\n            if (this.imageLoaded) {\n                this.replaceImageInBounds();\n                this.redraw();\n            }\n        },\n        rotation () {\n            if (this.imageLoaded) {\n                this.replaceImageInBounds();\n                this.redraw();\n            }\n        }\n\n    }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// VueAvatar.vue?42fee4d2","<template>\n  <input\n    :value=\"value\"\n    type=\"range\"\n    :min=\"min\"\n    :max=\"max\"\n    :step=\"step\"\n    @input=\"sendValue\"\n    :style=\"{ width:width +'px'}\"\n    />\n</template>\n\n<script>\n    export default{\n        props: {\n            width: {\n                type: Number,\n                default: 200\n            },\n            min: {\n                type: Number,\n                default: 1\n            },\n            max: {\n                type: Number,\n                default: 2\n            },\n            step: {\n                type: Number,\n                default: 0.01\n            },\n            value: {\n                type: Number,\n                default: 0\n            }\n        },\n        methods: {\n            sendValue ($event) {\n                this.$emit('update:value', parseFloat($event.target.value));\n            }\n        }\n    };\n</script>\n\n\n\n// WEBPACK FOOTER //\n// VueAvatarScale.vue?5fe26719","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('canvas', {\n    ref: \"avatarEditorCanvas\",\n    staticClass: \"cursorPointer\",\n    attrs: {\n      \"width\": _vm.canvasWidth,\n      \"height\": _vm.canvasHeight,\n      \"id\": \"avatarEditorCanvas\"\n    },\n    on: {\n      \"dragover\": function($event) {\n        $event.preventDefault();\n      },\n      \"drop\": _vm.onDrop,\n      \"mousedown\": _vm.onDragStart,\n      \"touchstart\": _vm.onDragStart,\n      \"click\": _vm.clicked\n    }\n  }), _vm._v(\" \"), _c('input', {\n    ref: \"input\",\n    staticStyle: {\n      \"display\": \"none\"\n    },\n    attrs: {\n      \"type\": \"file\"\n    },\n    on: {\n      \"change\": _vm.fileSelected\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-47dd3714\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/VueAvatar.vue\n// module id = 11\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('h1', [_vm._v(\"hello\")]), _vm._v(\" \"), _c('vue-avatar', {\n    ref: \"vueavatar\",\n    attrs: {\n      \"width\": 400,\n      \"height\": 400,\n      \"rotation\": _vm.rotation,\n      \"scale\": _vm.scale\n    },\n    on: {\n      \"vue-avatar-editor:image-ready\": _vm.onImageReady\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('vue-avatar-scale', {\n    ref: \"vueavatarscale\",\n    attrs: {\n      \"width\": 250,\n      \"min\": 1,\n      \"max\": 3,\n      \"step\": 0.02,\n      \"value\": _vm.scale\n    },\n    on: {\n      \"update:value\": function($event) {\n        _vm.scale = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('vue-avatar-scale', {\n    ref: \"vueavatarrotate\",\n    attrs: {\n      \"width\": 250,\n      \"min\": 0,\n      \"max\": 360,\n      \"step\": 1,\n      \"value\": _vm.rotation\n    },\n    on: {\n      \"update:value\": function($event) {\n        _vm.rotation = $event\n      }\n    }\n  }), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('img', {\n    ref: \"image\",\n    attrs: {\n      \"src\": \"\"\n    }\n  }), _vm._v(\" \"), _c('button', {\n    on: {\n      \"click\": _vm.saveClicked\n    }\n  }, [_vm._v(\"Click\")])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6680e483\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 12\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('input', {\n    style: ({\n      width: _vm.width + 'px'\n    }),\n    attrs: {\n      \"type\": \"range\",\n      \"min\": _vm.min,\n      \"max\": _vm.max,\n      \"step\": _vm.step\n    },\n    domProps: {\n      \"value\": _vm.value\n    },\n    on: {\n      \"input\": _vm.sendValue\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-8291e074\",\"hasScoped\":false}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/VueAvatarScale.vue\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}